<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.353">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Emily Norton - What is risk?</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<script src="site_libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<script src="site_libs/plotly-binding-4.10.4/plotly.js"></script>
<script src="site_libs/typedarray-0.1/typedarray.min.js"></script>
<script src="site_libs/jquery-3.5.1/jquery.min.js"></script>
<link href="site_libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet">
<script src="site_libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>
<link href="site_libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="site_libs/plotly-main-2.11.1/plotly-latest.min.js"></script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Emily Norton</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html" rel="" target="">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./about.html" rel="" target="">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./risk.html" rel="" target="" aria-current="page">
 <span class="menu-text">What is risk?</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./drop_boxes.html" rel="" target="">
 <span class="menu-text">Ballot Drop Boxes</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#the-set-up" id="toc-the-set-up" class="nav-link active" data-scroll-target="#the-set-up">1. The set up</a></li>
  <li><a href="#what-is-randomness-and-where-does-it-come-from" id="toc-what-is-randomness-and-where-does-it-come-from" class="nav-link" data-scroll-target="#what-is-randomness-and-where-does-it-come-from">2. What is randomness and where does it come from?</a></li>
  <li><a href="#why-do-we-use-a-proportion-to-estimate-a-probability" id="toc-why-do-we-use-a-proportion-to-estimate-a-probability" class="nav-link" data-scroll-target="#why-do-we-use-a-proportion-to-estimate-a-probability">3. Why do we use a proportion to estimate a probability?</a>
  <ul class="collapse">
  <li><a href="#a.-method-of-moments-estimation" id="toc-a.-method-of-moments-estimation" class="nav-link" data-scroll-target="#a.-method-of-moments-estimation">A. Method of moments estimation</a></li>
  <li><a href="#b.-maximum-likelihood-estimation" id="toc-b.-maximum-likelihood-estimation" class="nav-link" data-scroll-target="#b.-maximum-likelihood-estimation">B. Maximum likelihood estimation</a></li>
  </ul></li>
  <li><a href="#what-is-a-probability-anyway" id="toc-what-is-a-probability-anyway" class="nav-link" data-scroll-target="#what-is-a-probability-anyway">4. What is a probability anyway?</a>
  <ul class="collapse">
  <li><a href="#a.-classical-probability" id="toc-a.-classical-probability" class="nav-link" data-scroll-target="#a.-classical-probability">A. Classical probability</a></li>
  <li><a href="#b.-frequency-interpretations" id="toc-b.-frequency-interpretations" class="nav-link" data-scroll-target="#b.-frequency-interpretations">B. Frequency interpretations</a></li>
  <li><a href="#c.-subjective-interpretation-aka-bayesian" id="toc-c.-subjective-interpretation-aka-bayesian" class="nav-link" data-scroll-target="#c.-subjective-interpretation-aka-bayesian">C. Subjective interpretation (aka Bayesian)</a></li>
  </ul></li>
  <li><a href="#how-do-we-actually-estimate-your-probability-of-disease" id="toc-how-do-we-actually-estimate-your-probability-of-disease" class="nav-link" data-scroll-target="#how-do-we-actually-estimate-your-probability-of-disease">5. How do we actually estimate your probability of disease?</a></li>
  <li><a href="#the-reference-class-problem" id="toc-the-reference-class-problem" class="nav-link" data-scroll-target="#the-reference-class-problem">6. The reference class problem</a></li>
  <li><a href="#limitations" id="toc-limitations" class="nav-link" data-scroll-target="#limitations">7. Limitations</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content column-page-left" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">What is risk?</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="the-set-up" class="level2">
<h2 class="anchored" data-anchor-id="the-set-up">1. The set up</h2>
<p>Imagine that you go to your doctor. You’d like to know your (individual!) risk for some cancer. Let’s talk about what this actually means. Your risk is defined as the probability that you will actually get that disease. The concept of “true risk” is debated because you either will develop cancer or you won’t<span class="citation" data-cites="Stern-2012"><sup><a href="#ref-Stern-2012" role="doc-biblioref">1</a></sup></span> (see the “problem of the single-case” below). For now, we assume that this is not pre-determined. This estimate for your true risk is 1) practical because neither you, the best researchers, nor the smartest clinicians can be sure that you definitely will or will not develop cancer, and 2) may promote preventive behaviors, such as increased screenings or changes in modifiable risk factors (e.g.&nbsp;diet and exercise), that could help reduce your risk.</p>
<p>Assuming that a true risk does exist, let’s talk about your hypothetical probability of developing cancer. We’ll let this little blue circle represent a healthy version of you:</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-badeba43f65fa8be9dcd" style="width:100%;height:650px;"></div>
<script type="application/json" data-for="htmlwidget-badeba43f65fa8be9dcd">{"x":{"visdat":{"a2f5194bde0":["function () ","plotlyVisDat"]},"cur_data":"a2f5194bde0","attrs":{"a2f5194bde0":{"x":{},"y":{},"text":{},"mode":"markers","marker":{"size":20,"opacity":0.69999999999999996,"color":"rgb(66, 209, 209)"},"hoverinfo":"text","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"","xaxis":{"domain":[0,1],"automargin":true,"title":"","zeroline":false,"showline":false,"showticklabels":false,"showgrid":false},"yaxis":{"domain":[0,1],"automargin":true,"title":"","zeroline":false,"showline":false,"showticklabels":false,"showgrid":false},"hovermode":"closest","showlegend":false},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false,"displayModeBar":false},"data":[{"x":[1],"y":[1],"text":"you","mode":"markers","marker":{"color":"rgb(66, 209, 209)","size":20,"opacity":0.69999999999999996,"line":{"color":"rgba(31,119,180,1)"}},"hoverinfo":"text","type":"scatter","error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"line":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>My goal as a researcher is to estimate your (individual) probability of getting cancer. In a statistically-perfect, fictitious universe, I would study many (let’s say 100) counterfactual versions of you. These counterfactuals would be identical to you in every way. Let me repeat: in each world, all known and unknown characteristics that make you <em>you</em>, would be replicated perfectly.</p>
<div class="cell">
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-e7a6b520c58b37e85ba3" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-e7a6b520c58b37e85ba3">{"x":{"visdat":{"a2f56980bd03":["function () ","plotlyVisDat"]},"cur_data":"a2f56980bd03","attrs":{"a2f56980bd03":{"x":{},"y":{},"text":{},"mode":"markers","marker":{"size":20,"opacity":0.69999999999999996,"color":"rgb(66, 209, 209)"},"hoverinfo":"text","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"","xaxis":{"domain":[0,1],"automargin":true,"title":"","zeroline":false,"showline":false,"showticklabels":false,"showgrid":false},"yaxis":{"domain":[0,1],"automargin":true,"title":"","zeroline":false,"showline":false,"showticklabels":false,"showgrid":false},"hovermode":"closest","showlegend":false},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false,"displayModeBar":false},"data":[{"x":[1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,9,9,9,9,9,9,9,9,9,9,10,10,10,10,10,10,10,10,10,10],"y":[1,2,3,4,5,6,7,8,9,10,1,2,3,4,5,6,7,8,9,10,1,2,3,4,5,6,7,8,9,10,1,2,3,4,5,6,7,8,9,10,1,2,3,4,5,6,7,8,9,10,1,2,3,4,5,6,7,8,9,10,1,2,3,4,5,6,7,8,9,10,1,2,3,4,5,6,7,8,9,10,1,2,3,4,5,6,7,8,9,10,1,2,3,4,5,6,7,8,9,10],"text":["also you","still you","yep, it's you","you","still you","you","yep, it's you","yep, it's you","yep, it's you","also you","still you","also you","you","still you","you again","you","you again","yep, it's you","you again","still you","also you","you again","also you","yep, it's you","you again","also you","you","still you","still you","still you","also you","also you","also you","you","you","also you","you again","you again","you","also you","yep, it's you","you again","you","yep, it's you","yep, it's you","also you","also you","you again","yep, it's you","yep, it's you","you","also you","you again","you again","yep, it's you","you","still you","also you","still you","also you","yep, it's you","you","yep, it's you","yep, it's you","you again","you","yep, it's you","still you","you","still you","you","still you","you","still you","you again","still you","still you","you again","yep, it's you","you","you again","you again","you again","you","you again","still you","you again","also you","still you","yep, it's you","also you","still you","yep, it's you","you","you again","also you","you","still you","also you","yep, it's you"],"mode":"markers","marker":{"color":"rgb(66, 209, 209)","size":20,"opacity":0.69999999999999996,"line":{"color":"rgba(31,119,180,1)"}},"hoverinfo":["text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text"],"type":"scatter","error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"line":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>Then, in each world, I would monitor you to see if you develop cancer. For this demonstration, let’s say you develop cancer in 12 out of 100 worlds. We would thus estimate that your probability of developing cancer is <span class="math inline">\(\frac{12}{100} * 100\% = 12\%\)</span>.</p>
<div class="cell">
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-cb7eacf789a350e2ae91" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-cb7eacf789a350e2ae91">{"x":{"visdat":{"a2f53b674944":["function () ","plotlyVisDat"]},"cur_data":"a2f53b674944","attrs":{"a2f53b674944":{"x":{},"y":{},"text":{},"mode":"markers","marker":{"size":20,"opacity":0.69999999999999996,"color":["rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(255, 65, 54)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(255, 65, 54)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(255, 65, 54)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(255, 65, 54)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(255, 65, 54)","rgb(255, 65, 54)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(255, 65, 54)","rgb(66, 209, 209)","rgb(255, 65, 54)","rgb(66, 209, 209)","rgb(255, 65, 54)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(255, 65, 54)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(255, 65, 54)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(255, 65, 54)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)"]},"hoverinfo":"text","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"","xaxis":{"domain":[0,1],"automargin":true,"title":"","zeroline":false,"showline":false,"showticklabels":false,"showgrid":false},"yaxis":{"domain":[0,1],"automargin":true,"title":"","zeroline":false,"showline":false,"showticklabels":false,"showgrid":false},"hovermode":"closest","showlegend":false},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false,"displayModeBar":false},"data":[{"x":[1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,9,9,9,9,9,9,9,9,9,9,10,10,10,10,10,10,10,10,10,10],"y":[1,2,3,4,5,6,7,8,9,10,1,2,3,4,5,6,7,8,9,10,1,2,3,4,5,6,7,8,9,10,1,2,3,4,5,6,7,8,9,10,1,2,3,4,5,6,7,8,9,10,1,2,3,4,5,6,7,8,9,10,1,2,3,4,5,6,7,8,9,10,1,2,3,4,5,6,7,8,9,10,1,2,3,4,5,6,7,8,9,10,1,2,3,4,5,6,7,8,9,10],"text":["healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","sick","healthy","healthy","healthy","healthy","healthy","sick","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","sick","healthy","healthy","sick","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","sick","sick","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","sick","healthy","sick","healthy","sick","healthy","healthy","healthy","healthy","healthy","healthy","sick","healthy","healthy","healthy","healthy","sick","healthy","healthy","sick","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy"],"mode":"markers","marker":{"color":["rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(255, 65, 54)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(255, 65, 54)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(255, 65, 54)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(255, 65, 54)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(255, 65, 54)","rgb(255, 65, 54)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(255, 65, 54)","rgb(66, 209, 209)","rgb(255, 65, 54)","rgb(66, 209, 209)","rgb(255, 65, 54)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(255, 65, 54)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(255, 65, 54)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(255, 65, 54)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)"],"size":20,"opacity":0.69999999999999996,"line":{"color":"rgba(31,119,180,1)"}},"hoverinfo":["text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text"],"type":"scatter","error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"line":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>Let’s stop right there. First of all - why do we get different results in different worlds? As an empiricist, I find this apparent lack of reproducibility deeply unintuitive, even troubling. Secondly, did you notice that I estimated a probability as an observed proportion - why did I do that? Thirdly, once we have an estimate for your probability of disease, what does it even mean? Finally, in the real world, we can’t study 100 counterfactual versions of you, so what do we do? This discussion aims to address each of these points (at somewhat inconsistent levels of depth). Peruse various sections depending on your interests.</p>
</section>
<section id="what-is-randomness-and-where-does-it-come-from" class="level2">
<h2 class="anchored" data-anchor-id="what-is-randomness-and-where-does-it-come-from">2. What is randomness and where does it come from?</h2>
<p>True randomness is the absolute lack of pattern or predictability of events, and it is arguably an intrinsic aspect of natural systems<span class="citation" data-cites="Tsonis-2024"><sup><a href="#ref-Tsonis-2024" role="doc-biblioref">2</a></sup></span>:</p>
<ul>
<li><em>Quantum mechanics</em> states that we cannot precisely know both the position and velocity of subatomic particles, and by measuring either, we increase the uncertainty around the other quantity. Practically, this means that we cannot predict radioactive decay times for individual atoms, Brownian motion, heat transfer patterns, or cosmic radiation, to name a few. Thus, quantum mechanics serves as an inherent source of randomness in the universe.</li>
</ul>
<p>Alternatively, apparent randomness can be debunked by taking a closer look at the system, upon which order, pattern, and/or predictability could be discerned:</p>
<ul>
<li><p><em>Chaos</em> is unpredictability of a system arising due to high sensitivity to initial conditions. Given the slightest change in subatomic or atomic factors, we can see wide variations in outcomes (i.e.&nbsp;the butterfly effect).</p></li>
<li><p><em>Stochasticity</em> is the idea that a very large number (i.e.&nbsp;an uncountable number) of external agents interact, creating an extremely complex web of factors that affect an outcome.</p></li>
</ul>
<p>Apparently random processes are extremely complex. Sometimes we approximate them with true randomness to simplify our model and minimize required computational power. For example, genetic mutations and environmental exposures (e.g.&nbsp;air pollution, smoking, diet, exercise, UV exposure, etc.) may not be truly random<span class="citation" data-cites="Monroe-2022"><sup><a href="#ref-Monroe-2022" role="doc-biblioref">3</a></sup></span>, but we can simplify our calculations dramatically by selecting only the most important risk factors and grouping the others into a random error term.</p>
</section>
<section id="why-do-we-use-a-proportion-to-estimate-a-probability" class="level2">
<h2 class="anchored" data-anchor-id="why-do-we-use-a-proportion-to-estimate-a-probability">3. Why do we use a proportion to estimate a probability?</h2>
<p>The field of statistics gives us several tools to estimate a parameter, which is exactly what our probability is here. Let’s begin by re-stating our problem mathematically. We will consider your health status (yes, yours!) as a random variable since we don’t know your outcome yet. Your possible outcomes are healthy (denoted as a <span class="math inline">\(0\)</span>) and diseased (denoted as a <span class="math inline">\(1\)</span>). Thus, we aim to estimate your probability of being diseased, <span class="math inline">\(p\)</span>, defined as <span class="math inline">\(p = P(X = 1)\)</span>, where <span class="math inline">\(P\)</span> is a probability function. Thus, since we have two possible outcomes, and one probability parameter, we will assume that <span class="math inline">\(X\)</span> follows a Bernoulli distribution with probability p:</p>
<p><span class="math display">\[X \sim Ber(p)\]</span></p>
<section id="a.-method-of-moments-estimation" class="level3">
<h3 class="anchored" data-anchor-id="a.-method-of-moments-estimation">A. Method of moments estimation</h3>
<p>The method of moments estimation technique is based on the result from the Weak Law of Large Numbers (WLLN), which says that the empirical mean <span class="math inline">\(\bar{X}\)</span> approaches the true mean of a random variable [X] as the number of observations <span class="math inline">\(n\)</span> gets large. More formally, we state the WLLN as follows:</p>
<p><span class="math display">\[
\bar{X_n} \to^p \mathbb{E}[X]
\]</span> where <span class="math inline">\(\to^p\)</span> indicates convergence in probability.</p>
<p>Thus, we can substitute the observed empirical mean <span class="math inline">\(\bar{x}\)</span> for its expectation, and solve for our parameter <span class="math inline">\(p\)</span> as follows:</p>
<p><span class="math display">\[
\begin{align}
\mathop{\mathbb{E}}[X] &amp;= p \\
\bar{X} &amp;\approx p \\  
\hat{p} &amp;= \frac{1}{n}\sum_{i=1}^{n}X_i
\end{align}
\]</span></p>
</section>
<section id="b.-maximum-likelihood-estimation" class="level3">
<h3 class="anchored" data-anchor-id="b.-maximum-likelihood-estimation">B. Maximum likelihood estimation</h3>
<p>An alternative approach, that has many appealing properties, is known as maximum likelihood estimation, or MLE. This method reframes the problem in such as way that we can think about finding the parameter <span class="math inline">\(p\)</span> that makes our observations <span class="math inline">\(x\)</span> most likely. For a <span class="math inline">\(Ber(p)\)</span> random variable, the likelihood function, which is the same as the joint probability mass function, is</p>
<p><span class="math display">\[
\begin{align}
{\cal{L}}{(p|X)} &amp;= \Pi_{i=1}^n P(X_i|p)  \\
&amp;= \Pi_{i=1}^{n} p^{X_i}(1-p)^{1 - X_i}
\end{align}
\]</span></p>
<p>We will maximize the log likelihood (since it is easier to work with), by taking its derivative, setting it equal to zero, and solving for <span class="math inline">\(p\)</span>:</p>
<p><span class="math display">\[
\begin{align}
log({\cal{L}}) &amp;\propto \sum_{i=1}^{n} X_i log(p) + (1-X_i)log(1-p) \\
\frac{dlog{\cal{L}}}{dp} &amp;\propto \frac{\sum_{i=1}^{n}{X_i}}{p} - \frac{n-\sum_{i=1}^{n}{X_i}}{1-p}  \\
0 &amp;= \frac{\sum_{i=1}^{n}{X_i}}{p} - \frac{n-\sum_{i=1}^{n}{X_i}}{1-p}  \\
\hat{p} &amp;= \frac{1}{n}\sum_{i=1}^{n}{X_i}
\end{align}
\]</span></p>
<p>In summary, both methods give the same estimate for <span class="math inline">\(p\)</span> which is equal to the total number of successes (or in this case, the number of times you develop the disease: 12) divided by the total number of trials (or in this case, the total number of fictitious worlds where we followed a counterfactual version of you: n = 100). Thus, we arrive at our previous estimate that you have a 12% probability of getting cancer.</p>
</section>
</section>
<section id="what-is-a-probability-anyway" class="level2">
<h2 class="anchored" data-anchor-id="what-is-a-probability-anyway">4. What is a probability anyway?</h2>
<p>Now that I’ve told you that your true risk of developing cancer is 12% - so what?? What are some ways you can interpret that statement?</p>
<p>Intuitively, many of us think about probability as the chance or likelihood of something happening. More rigorously, recall that a probability measure must meet the three axioms stated by Kolmogorov (1933). Simply put, they say that 1) the total probability of all possible outcomes must equal 1, 2) for any possible outcome, its probability must be between 0 and 1 (i.e.&nbsp;no negative probabilities), and 3) that the probability of mutually exclusive outcomes is equal to the sum of the probabilities of each outcome. Mathematically, we write:</p>
<p>For probability triple, <span class="math inline">\((\Omega, \cal{F}, P)\)</span>, where <span class="math inline">\(\Omega\)</span> = sample space, <span class="math inline">\(\cal{F}\)</span> = <span class="math inline">\(\sigma\)</span>-algebra, and <span class="math inline">\(P\)</span> = probability measure, <span class="math display">\[P(\Omega) = 1, \]</span> <span class="math display">\[P(p) \ge 0 \text{ for any } p \in \Omega,\]</span> <span class="math display">\[P(\cup_{i} p_i) = \Sigma_{i} p_i \text{ for countable disjoint } p_i.\]</span></p>
<p>There are at least six distinct ways to interpret probabilities<span class="citation" data-cites="Hajek-2019"><sup><a href="#ref-Hajek-2019" role="doc-biblioref">4</a></sup></span>, but I will highlight the three most common. I won’t go into each thoroughly, but I want to give a sense for the range of what a probability might mean. Perhaps the similarities and differences between the interpretations will help us understand the concept of probability more deeply. I think it’s important for the person communicating the probability as well as the one receiving it to be aware of the potential ways that the information may be interpreted.</p>
<section id="a.-classical-probability" class="level3">
<h3 class="anchored" data-anchor-id="a.-classical-probability">A. Classical probability</h3>
<p><em>Core idea</em>: Probability is determined <em>a priori</em> by identifying all possible outcomes and assigning each one an equal chance.</p>
<p><em>Example</em>: Assume a coin is fair. Then since there are two sides (heads and tails), we attribute equal probability to each: <span class="math inline">\(P(heads) = P(tails) = 0.5\)</span>.</p>
<p><em>Breakdown</em>: Large (uncountable) probability spaces, spaces with unknown/unaccounted outcomes, unequal chances for different events (e.g.&nbsp;weighted dice, unfair coin)</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="heads_tails.png" class="img-fluid figure-img" style="width:40.0%"></p>
<figcaption class="figure-caption">Heads and tails of a U.S. quarter</figcaption>
</figure>
</div>
</section>
<section id="b.-frequency-interpretations" class="level3">
<h3 class="anchored" data-anchor-id="b.-frequency-interpretations">B. Frequency interpretations</h3>
<p><em>Core idea</em>: Frequentists assume that the long-run frequency of events is fixed, objective, and intrinsically tied to the probability of that event. Thus, instead of considering all of the possible outcomes (as in classical probability), we will use the observed outcomes and compare this to the expected results assuming a null hypothesis<span class="citation" data-cites="Hajek-2019"><sup><a href="#ref-Hajek-2019" role="doc-biblioref">4</a></sup></span>.</p>
<p><em>Example</em>: Let’s assess whether a coin is fair by estimating the probability of a coin landing on heads. We would flip the coin many times and estimate the probability by counting the number of heads and dividing it by the number of total trials. If this is (sufficiently) close to 0.5, we would assume this is a fair coin. Experiments with a large number of repeated trials or large sample sizes of independent events are good applications for frequentists statistics.</p>
<p><em>Breakdown</em>: Suppose we only observed a few of the trials above. If we observed up to 10 trials (first row below) we would be tempted to conclude that your cancer risk is 0/10 = 0%. However, if we observed 11 trials, we would conclude that your risk is 1/11 = 9.1%. With 50 trials, we would estimate that your cancer risk is 4/50 = 8%. But none of these is correct. We know theoretically that a sequence of unlikely events is possible, but frequentists assume that the probability that corresponds most closely with the observed data, regardless of prior knowledge, is the best estimate. As the number of trials increases, this becomes less of a problem, but few real-life events are repeatable an arbitrary number of times, and many are downright unrepeatable (e.g.&nbsp;the Big Bang, volcanic eruption/earthquake/natural disaster, 2024 presidential election, etc.) leaving us with a gap in how to reconcile the true probability of the event. This is known as the “problem of the single-case.” This also becomes much more complex in the event of dependent events.</p>
<div class="cell">
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-d913b02d8a14199b73d8" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-d913b02d8a14199b73d8">{"x":{"visdat":{"a2f53b674944":["function () ","plotlyVisDat"]},"cur_data":"a2f53b674944","attrs":{"a2f53b674944":{"x":{},"y":{},"text":{},"mode":"markers","marker":{"size":20,"opacity":0.69999999999999996,"color":["rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(255, 65, 54)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(255, 65, 54)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(255, 65, 54)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(255, 65, 54)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(255, 65, 54)","rgb(255, 65, 54)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(255, 65, 54)","rgb(66, 209, 209)","rgb(255, 65, 54)","rgb(66, 209, 209)","rgb(255, 65, 54)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(255, 65, 54)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(255, 65, 54)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(255, 65, 54)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)"]},"hoverinfo":"text","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"","xaxis":{"domain":[0,1],"automargin":true,"title":"","zeroline":false,"showline":false,"showticklabels":false,"showgrid":false},"yaxis":{"domain":[0,1],"automargin":true,"title":"","zeroline":false,"showline":false,"showticklabels":false,"showgrid":false,"range":[5.5,10.5]},"hovermode":"closest","showlegend":false},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false,"displayModeBar":false},"data":[{"x":[1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,9,9,9,9,9,9,9,9,9,9,10,10,10,10,10,10,10,10,10,10],"y":[1,2,3,4,5,6,7,8,9,10,1,2,3,4,5,6,7,8,9,10,1,2,3,4,5,6,7,8,9,10,1,2,3,4,5,6,7,8,9,10,1,2,3,4,5,6,7,8,9,10,1,2,3,4,5,6,7,8,9,10,1,2,3,4,5,6,7,8,9,10,1,2,3,4,5,6,7,8,9,10,1,2,3,4,5,6,7,8,9,10,1,2,3,4,5,6,7,8,9,10],"text":["healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","sick","healthy","healthy","healthy","healthy","healthy","sick","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","sick","healthy","healthy","sick","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","sick","sick","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","sick","healthy","sick","healthy","sick","healthy","healthy","healthy","healthy","healthy","healthy","sick","healthy","healthy","healthy","healthy","sick","healthy","healthy","sick","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy"],"mode":"markers","marker":{"color":["rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(255, 65, 54)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(255, 65, 54)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(255, 65, 54)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(255, 65, 54)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(255, 65, 54)","rgb(255, 65, 54)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(255, 65, 54)","rgb(66, 209, 209)","rgb(255, 65, 54)","rgb(66, 209, 209)","rgb(255, 65, 54)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(255, 65, 54)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(255, 65, 54)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(255, 65, 54)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)","rgb(66, 209, 209)"],"size":20,"opacity":0.69999999999999996,"line":{"color":"rgba(31,119,180,1)"}},"hoverinfo":["text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text"],"type":"scatter","error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"line":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="c.-subjective-interpretation-aka-bayesian" class="level3">
<h3 class="anchored" data-anchor-id="c.-subjective-interpretation-aka-bayesian">C. Subjective interpretation (aka Bayesian)</h3>
<p><em>Core idea</em>: A probability represents someone’s degree of belief, confidence, or credence. This “someone” is a rational and logically consistent “suitable agent” who follows the axioms of probability. However, these credences are inherently subjective (hence the name). Your level of credence about an event can be estimated by what you would consider a “fair bet” (i.e.&nbsp;putting your money where you mouth is): “Your degree of belief in E is p iff p units of utility is the price at which you would buy or sell a bet that pays 1 unit of utility if E, 0 if not E”<span class="citation" data-cites="Hajek-2019"><sup><a href="#ref-Hajek-2019" role="doc-biblioref">4</a></sup></span>. In other words, you are indifferent to placing a bet <span class="math inline">\(p\)</span> on <span class="math inline">\(E\)</span> as you are to placing <span class="math inline">\(1-p\)</span> on <span class="math inline">\(\neg E\)</span>. In the statistical framework, someone’s belief is based on prior knowledge - summarized as a prior probability with a selected distribution and parameter(s) - which is combined with observed data to obtain a posterior, from which conclusions are drawn<span class="citation" data-cites="Bernardo-Smith-1994"><sup><a href="#ref-Bernardo-Smith-1994" role="doc-biblioref">5</a></sup></span>.</p>
<p><span class="math inline">\(\text{Bayes Rule:}\)</span> <span class="math display">\[
P(H|E) = \frac{P(E|H) \cdot P(H)}{P(E)}
\]</span> where <span class="math inline">\(H\)</span> is the hypothesis, <span class="math inline">\(P(H)\)</span> is the estimate of the probability of the hypothesis (i.e.&nbsp;“prior” probability), <span class="math inline">\(E\)</span> is the evidence (i.e.&nbsp;data), <span class="math inline">\(P(E)\)</span> is the marginal likelihood of the data, <span class="math inline">\(P(E|H)\)</span> is the “likelihood” of the data given the fixed hypothesis, and <span class="math inline">\(P(H|E)\)</span> is the probability of the hypothesis given the fixed data (i.e.&nbsp;“posterior” probability).</p>
<p><em>Example</em>: We could evaluate the hypothesis that a coin is fair compared to the hypothesis that it is not by calculating the posterior under each prior. First we might assume that the coin flip is fair (i.e.&nbsp;the flip is distributed Bernoulli(0.5)). Then we flip the coin many times and count the number of heads. We then estimate the likelihood of this event given the fixed hypothesis that the coin is fair. Finally, we multiply the likelihood and the prior to generate a posterior probability that the coin is fair given the data. It is common to compare two hypotheses, so we may also repeat the process assuming another parameter for the prior probability. Then we could compare the posterior probabilities for these two hypotheses and see which is more probable.</p>
<p><em>Breakdown</em>: Selecting a prior is subjective and there are few well-defined methods for choosing one<span class="citation" data-cites="Hackenberger-2019"><sup><a href="#ref-Hackenberger-2019" role="doc-biblioref">6</a></sup></span>. Sometimes there is minimal prior knowledge, in which case a uniform prior may be used; this is the same as doing a frequentist analysis.</p>
<p>Going back to our cancer example, we employed a frequentist approach to estimate your risk of cancer (in some fictitious universe). If we had <em>a priori</em> knowledge about your risk of cancer, e.g.&nbsp;given your family history, age, or other factors, we could update our probability estimate by combining the observed data and this prior knowledge in a Bayesian approach.</p>
</section>
</section>
<section id="how-do-we-actually-estimate-your-probability-of-disease" class="level2">
<h2 class="anchored" data-anchor-id="how-do-we-actually-estimate-your-probability-of-disease">5. How do we actually estimate your probability of disease?</h2>
<p>In reality, of course, we can’t study 100 counterfactual versions of you. We have to make an estimate with what’s available to us now. Since you are a human, let’s estimate the risk within a group of 100 randomly sampled humans:</p>
<div class="cell">
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-260c7976bfa5b08fc795" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-260c7976bfa5b08fc795">{"x":{"visdat":{"a2f54c457f79":["function () ","plotlyVisDat"]},"cur_data":"a2f54c457f79","attrs":{"a2f54c457f79":{"x":{},"y":{},"text":{},"mode":"markers","marker":{"size":20,"opacity":0.69999999999999996,"color":["rgb(66,192,209)","rgb(66,206,209)","rgb(66,71,209)","rgb(66,105,209)","rgb(66,71,209)","rgb(66,118,209)","rgb(66,133,209)","rgb(66,89,209)","rgb(66,182,209)","rgb(66,115,209)","rgb(66,108,209)","rgb(66,90,209)","rgb(66,194,209)","rgb(66,133,209)","rgb(66,158,209)","rgb(66,207,209)","rgb(66,189,209)","rgb(66,174,209)","rgb(66,167,209)","rgb(66,85,209)","rgb(66,131,209)","rgb(66,94,209)","rgb(66,114,209)","rgb(66,93,209)","rgb(66,114,209)","rgb(66,205,209)","rgb(66,169,209)","rgb(66,182,209)","rgb(66,92,209)","rgb(66,125,209)","rgb(66,139,209)","rgb(66,129,209)","rgb(66,137,209)","rgb(66,198,209)","rgb(66,170,209)","rgb(66,157,209)","rgb(66,120,209)","rgb(66,79,209)","rgb(66,134,209)","rgb(66,135,209)","rgb(66,160,209)","rgb(66,148,209)","rgb(66,96,209)","rgb(66,73,209)","rgb(66,103,209)","rgb(66,95,209)","rgb(66,94,209)","rgb(66,174,209)","rgb(66,87,209)","rgb(66,169,209)","rgb(66,197,209)","rgb(66,136,209)","rgb(66,92,209)","rgb(66,171,209)","rgb(66,199,209)","rgb(66,69,209)","rgb(66,117,209)","rgb(66,155,209)","rgb(66,118,209)","rgb(66,111,209)","rgb(66,161,209)","rgb(66,150,209)","rgb(66,171,209)","rgb(66,167,209)","rgb(66,97,209)","rgb(66,176,209)","rgb(66,79,209)","rgb(66,77,209)","rgb(66,129,209)","rgb(66,165,209)","rgb(66,209,209)","rgb(66,174,209)","rgb(66,103,209)","rgb(66,87,209)","rgb(66,204,209)","rgb(66,100,209)","rgb(66,188,209)","rgb(66,158,209)","rgb(66,163,209)","rgb(66,130,209)","rgb(66,137,209)","rgb(66,177,209)","rgb(66,130,209)","rgb(66,194,209)","rgb(66,127,209)","rgb(66,112,209)","rgb(66,136,209)","rgb(66,158,209)","rgb(66,163,209)","rgb(66,101,209)","rgb(66,180,209)","rgb(66,108,209)","rgb(66,93,209)","rgb(66,184,209)","rgb(66,163,209)","rgb(66,117,209)","rgb(66,89,209)","rgb(66,95,209)","rgb(66,128,209)","rgb(66,194,209)"]},"hoverinfo":"text","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"","xaxis":{"domain":[0,1],"automargin":true,"title":"","zeroline":false,"showline":false,"showticklabels":false,"showgrid":false},"yaxis":{"domain":[0,1],"automargin":true,"title":"","zeroline":false,"showline":false,"showticklabels":false,"showgrid":false},"hovermode":"closest","showlegend":false},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false,"displayModeBar":false},"data":[{"x":[1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,9,9,9,9,9,9,9,9,9,9,10,10,10,10,10,10,10,10,10,10],"y":[1,2,3,4,5,6,7,8,9,10,1,2,3,4,5,6,7,8,9,10,1,2,3,4,5,6,7,8,9,10,1,2,3,4,5,6,7,8,9,10,1,2,3,4,5,6,7,8,9,10,1,2,3,4,5,6,7,8,9,10,1,2,3,4,5,6,7,8,9,10,1,2,3,4,5,6,7,8,9,10,1,2,3,4,5,6,7,8,9,10,1,2,3,4,5,6,7,8,9,10],"text":["not you","somebody else","somebody else","somebody else","also not you","nope, not you","also not you","still not you","still not you","not you","still not you","somebody else","somebody else","nope, not you","nope, not you","not you","also not you","also not you","still not you","not you","nope, not you","also not you","not you","somebody else","somebody else","still not you","not you","somebody else","still not you","still not you","not you","also not you","not you","nope, not you","also not you","also not you","nope, not you","still not you","not you","still not you","also not you","somebody else","nope, not you","somebody else","somebody else","also not you","nope, not you","still not you","somebody else","somebody else","somebody else","not you","also not you","still not you","still not you","nope, not you","still not you","nope, not you","also not you","also not you","still not you","not you","not you","nope, not you","still not you","still not you","also not you","not you","somebody else","nope, not you","also not you","not you","nope, not you","still not you","also not you","nope, not you","nope, not you","nope, not you","somebody else","not you","not you","not you","also not you","still not you","not you","somebody else","also not you","somebody else","somebody else","also not you","not you","nope, not you","somebody else","also not you","still not you","nope, not you","nope, not you","still not you","nope, not you","not you"],"mode":"markers","marker":{"color":["rgb(66,192,209)","rgb(66,206,209)","rgb(66,71,209)","rgb(66,105,209)","rgb(66,71,209)","rgb(66,118,209)","rgb(66,133,209)","rgb(66,89,209)","rgb(66,182,209)","rgb(66,115,209)","rgb(66,108,209)","rgb(66,90,209)","rgb(66,194,209)","rgb(66,133,209)","rgb(66,158,209)","rgb(66,207,209)","rgb(66,189,209)","rgb(66,174,209)","rgb(66,167,209)","rgb(66,85,209)","rgb(66,131,209)","rgb(66,94,209)","rgb(66,114,209)","rgb(66,93,209)","rgb(66,114,209)","rgb(66,205,209)","rgb(66,169,209)","rgb(66,182,209)","rgb(66,92,209)","rgb(66,125,209)","rgb(66,139,209)","rgb(66,129,209)","rgb(66,137,209)","rgb(66,198,209)","rgb(66,170,209)","rgb(66,157,209)","rgb(66,120,209)","rgb(66,79,209)","rgb(66,134,209)","rgb(66,135,209)","rgb(66,160,209)","rgb(66,148,209)","rgb(66,96,209)","rgb(66,73,209)","rgb(66,103,209)","rgb(66,95,209)","rgb(66,94,209)","rgb(66,174,209)","rgb(66,87,209)","rgb(66,169,209)","rgb(66,197,209)","rgb(66,136,209)","rgb(66,92,209)","rgb(66,171,209)","rgb(66,199,209)","rgb(66,69,209)","rgb(66,117,209)","rgb(66,155,209)","rgb(66,118,209)","rgb(66,111,209)","rgb(66,161,209)","rgb(66,150,209)","rgb(66,171,209)","rgb(66,167,209)","rgb(66,97,209)","rgb(66,176,209)","rgb(66,79,209)","rgb(66,77,209)","rgb(66,129,209)","rgb(66,165,209)","rgb(66,209,209)","rgb(66,174,209)","rgb(66,103,209)","rgb(66,87,209)","rgb(66,204,209)","rgb(66,100,209)","rgb(66,188,209)","rgb(66,158,209)","rgb(66,163,209)","rgb(66,130,209)","rgb(66,137,209)","rgb(66,177,209)","rgb(66,130,209)","rgb(66,194,209)","rgb(66,127,209)","rgb(66,112,209)","rgb(66,136,209)","rgb(66,158,209)","rgb(66,163,209)","rgb(66,101,209)","rgb(66,180,209)","rgb(66,108,209)","rgb(66,93,209)","rgb(66,184,209)","rgb(66,163,209)","rgb(66,117,209)","rgb(66,89,209)","rgb(66,95,209)","rgb(66,128,209)","rgb(66,194,209)"],"size":20,"opacity":0.69999999999999996,"line":{"color":"rgba(31,119,180,1)"}},"hoverinfo":["text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text"],"type":"scatter","error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"line":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>After following these 100 individuals, we find that 11 people get cancer. Risk (or cumulative incidence) is estimated as the number of incident (i.e.&nbsp;new) cases within a given time divided by the number of individuals in the study population (sounds familiar, eh?). Thus, we estimate an 11% risk within this study population.</p>
<div class="cell">
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-5ea519ebdb36f26d6df1" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-5ea519ebdb36f26d6df1">{"x":{"visdat":{"a2f5357cc228":["function () ","plotlyVisDat"]},"cur_data":"a2f5357cc228","attrs":{"a2f5357cc228":{"x":{},"y":{},"text":{},"mode":"markers","marker":{"size":20,"opacity":0.69999999999999996,"color":["rgb(66,192,209)","rgb(66,206,209)","rgb(66,71,209)","rgb(66,105,209)","rgb(66,71,209)","rgb(66,118,209)","rgb(66,133,209)","rgb(255, 65, 54)","rgb(66,182,209)","rgb(66,115,209)","rgb(66,108,209)","rgb(66,90,209)","rgb(66,194,209)","rgb(66,133,209)","rgb(66,158,209)","rgb(255, 65, 54)","rgb(66,189,209)","rgb(66,174,209)","rgb(255, 65, 54)","rgb(66,85,209)","rgb(66,131,209)","rgb(66,94,209)","rgb(66,114,209)","rgb(66,93,209)","rgb(66,114,209)","rgb(66,205,209)","rgb(66,169,209)","rgb(66,182,209)","rgb(66,92,209)","rgb(66,125,209)","rgb(255, 65, 54)","rgb(66,129,209)","rgb(255, 65, 54)","rgb(66,198,209)","rgb(66,170,209)","rgb(66,157,209)","rgb(66,120,209)","rgb(66,79,209)","rgb(66,134,209)","rgb(66,135,209)","rgb(66,160,209)","rgb(66,148,209)","rgb(255, 65, 54)","rgb(66,73,209)","rgb(66,103,209)","rgb(255, 65, 54)","rgb(255, 65, 54)","rgb(66,174,209)","rgb(66,87,209)","rgb(66,169,209)","rgb(66,197,209)","rgb(66,136,209)","rgb(66,92,209)","rgb(66,171,209)","rgb(66,199,209)","rgb(66,69,209)","rgb(66,117,209)","rgb(66,155,209)","rgb(66,118,209)","rgb(66,111,209)","rgb(66,161,209)","rgb(66,150,209)","rgb(66,171,209)","rgb(66,167,209)","rgb(66,97,209)","rgb(66,176,209)","rgb(66,79,209)","rgb(66,77,209)","rgb(255, 65, 54)","rgb(66,165,209)","rgb(66,209,209)","rgb(66,174,209)","rgb(66,103,209)","rgb(66,87,209)","rgb(66,204,209)","rgb(66,100,209)","rgb(66,188,209)","rgb(66,158,209)","rgb(66,163,209)","rgb(66,130,209)","rgb(66,137,209)","rgb(66,177,209)","rgb(66,130,209)","rgb(255, 65, 54)","rgb(66,127,209)","rgb(66,112,209)","rgb(255, 65, 54)","rgb(66,158,209)","rgb(66,163,209)","rgb(66,101,209)","rgb(66,180,209)","rgb(66,108,209)","rgb(66,93,209)","rgb(66,184,209)","rgb(66,163,209)","rgb(66,117,209)","rgb(66,89,209)","rgb(66,95,209)","rgb(66,128,209)","rgb(66,194,209)"]},"hoverinfo":"text","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"","xaxis":{"domain":[0,1],"automargin":true,"title":"","zeroline":false,"showline":false,"showticklabels":false,"showgrid":false},"yaxis":{"domain":[0,1],"automargin":true,"title":"","zeroline":false,"showline":false,"showticklabels":false,"showgrid":false},"hovermode":"closest","showlegend":false},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false,"displayModeBar":false},"data":[{"x":[1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,9,9,9,9,9,9,9,9,9,9,10,10,10,10,10,10,10,10,10,10],"y":[1,2,3,4,5,6,7,8,9,10,1,2,3,4,5,6,7,8,9,10,1,2,3,4,5,6,7,8,9,10,1,2,3,4,5,6,7,8,9,10,1,2,3,4,5,6,7,8,9,10,1,2,3,4,5,6,7,8,9,10,1,2,3,4,5,6,7,8,9,10,1,2,3,4,5,6,7,8,9,10,1,2,3,4,5,6,7,8,9,10,1,2,3,4,5,6,7,8,9,10],"text":["healthy","healthy","healthy","healthy","healthy","healthy","healthy","sick","healthy","healthy","healthy","healthy","healthy","healthy","healthy","sick","healthy","healthy","sick","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","sick","healthy","sick","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","sick","healthy","healthy","sick","sick","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","sick","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","sick","healthy","healthy","sick","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy"],"mode":"markers","marker":{"color":["rgb(66,192,209)","rgb(66,206,209)","rgb(66,71,209)","rgb(66,105,209)","rgb(66,71,209)","rgb(66,118,209)","rgb(66,133,209)","rgb(255, 65, 54)","rgb(66,182,209)","rgb(66,115,209)","rgb(66,108,209)","rgb(66,90,209)","rgb(66,194,209)","rgb(66,133,209)","rgb(66,158,209)","rgb(255, 65, 54)","rgb(66,189,209)","rgb(66,174,209)","rgb(255, 65, 54)","rgb(66,85,209)","rgb(66,131,209)","rgb(66,94,209)","rgb(66,114,209)","rgb(66,93,209)","rgb(66,114,209)","rgb(66,205,209)","rgb(66,169,209)","rgb(66,182,209)","rgb(66,92,209)","rgb(66,125,209)","rgb(255, 65, 54)","rgb(66,129,209)","rgb(255, 65, 54)","rgb(66,198,209)","rgb(66,170,209)","rgb(66,157,209)","rgb(66,120,209)","rgb(66,79,209)","rgb(66,134,209)","rgb(66,135,209)","rgb(66,160,209)","rgb(66,148,209)","rgb(255, 65, 54)","rgb(66,73,209)","rgb(66,103,209)","rgb(255, 65, 54)","rgb(255, 65, 54)","rgb(66,174,209)","rgb(66,87,209)","rgb(66,169,209)","rgb(66,197,209)","rgb(66,136,209)","rgb(66,92,209)","rgb(66,171,209)","rgb(66,199,209)","rgb(66,69,209)","rgb(66,117,209)","rgb(66,155,209)","rgb(66,118,209)","rgb(66,111,209)","rgb(66,161,209)","rgb(66,150,209)","rgb(66,171,209)","rgb(66,167,209)","rgb(66,97,209)","rgb(66,176,209)","rgb(66,79,209)","rgb(66,77,209)","rgb(255, 65, 54)","rgb(66,165,209)","rgb(66,209,209)","rgb(66,174,209)","rgb(66,103,209)","rgb(66,87,209)","rgb(66,204,209)","rgb(66,100,209)","rgb(66,188,209)","rgb(66,158,209)","rgb(66,163,209)","rgb(66,130,209)","rgb(66,137,209)","rgb(66,177,209)","rgb(66,130,209)","rgb(255, 65, 54)","rgb(66,127,209)","rgb(66,112,209)","rgb(255, 65, 54)","rgb(66,158,209)","rgb(66,163,209)","rgb(66,101,209)","rgb(66,180,209)","rgb(66,108,209)","rgb(66,93,209)","rgb(66,184,209)","rgb(66,163,209)","rgb(66,117,209)","rgb(66,89,209)","rgb(66,95,209)","rgb(66,128,209)","rgb(66,194,209)"],"size":20,"opacity":0.69999999999999996,"line":{"color":"rgba(31,119,180,1)"}},"hoverinfo":["text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text"],"type":"scatter","error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"line":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>Then, assuming that all individuals in this study population are independent and identically distributed*, using the math above, we assign each individual within the target population (which includes you!) the same probability of disease. * The assumption of the participants being identically distributed is critical, and impossible to test. Practically, researchers and clinicians attempt to group individuals with similar risk factors into the same group to estimate risk, but defining which population is most relevant to you is challenging if not impossible.</p>
</section>
<section id="the-reference-class-problem" class="level2">
<h2 class="anchored" data-anchor-id="the-reference-class-problem">6. The reference class problem</h2>
<p>For demonstration purposes, let’s assume the same overall risk of 11% in the total population. Now consider the subset of this population that are men (i.e.&nbsp;the left half of the population): 8/50 men get sick, so their risk is 16%. Women (on the right), however, get sick at a rate of 3/50 = 6%. We can subdivide our population further by age, or any other risk factors (or any combination of these characteristics), and we estimate different risks for each subpopulation. Taking this to an extreme, we see that a young man has a 20% risk, and an older man has a 12% risk; a young woman has an 8% risk, and an older woman has a 4% risk. So which population - and consequently which risk estimate - is most relevant for a given individual?</p>
<div class="cell">
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-b62ab844ba75a58828aa" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-b62ab844ba75a58828aa">{"x":{"visdat":{"a2f5357cc228":["function () ","plotlyVisDat"]},"cur_data":"a2f5357cc228","attrs":{"a2f5357cc228":{"x":{},"y":{},"text":{},"mode":"markers","marker":{"size":20,"opacity":0.69999999999999996,"color":["rgb(66,192,209)","rgb(66,206,209)","rgb(66,71,209)","rgb(66,105,209)","rgb(66,71,209)","rgb(66,118,209)","rgb(66,133,209)","rgb(255, 65, 54)","rgb(66,182,209)","rgb(66,115,209)","rgb(66,108,209)","rgb(66,90,209)","rgb(66,194,209)","rgb(66,133,209)","rgb(66,158,209)","rgb(255, 65, 54)","rgb(66,189,209)","rgb(66,174,209)","rgb(255, 65, 54)","rgb(66,85,209)","rgb(66,131,209)","rgb(66,94,209)","rgb(66,114,209)","rgb(66,93,209)","rgb(66,114,209)","rgb(66,205,209)","rgb(66,169,209)","rgb(66,182,209)","rgb(66,92,209)","rgb(66,125,209)","rgb(255, 65, 54)","rgb(66,129,209)","rgb(255, 65, 54)","rgb(66,198,209)","rgb(66,170,209)","rgb(66,157,209)","rgb(66,120,209)","rgb(66,79,209)","rgb(66,134,209)","rgb(66,135,209)","rgb(66,160,209)","rgb(66,148,209)","rgb(255, 65, 54)","rgb(66,73,209)","rgb(66,103,209)","rgb(255, 65, 54)","rgb(255, 65, 54)","rgb(66,174,209)","rgb(66,87,209)","rgb(66,169,209)","rgb(66,197,209)","rgb(66,136,209)","rgb(66,92,209)","rgb(66,171,209)","rgb(66,199,209)","rgb(66,69,209)","rgb(66,117,209)","rgb(66,155,209)","rgb(66,118,209)","rgb(66,111,209)","rgb(66,161,209)","rgb(66,150,209)","rgb(66,171,209)","rgb(66,167,209)","rgb(66,97,209)","rgb(66,176,209)","rgb(66,79,209)","rgb(66,77,209)","rgb(255, 65, 54)","rgb(66,165,209)","rgb(66,209,209)","rgb(66,174,209)","rgb(66,103,209)","rgb(66,87,209)","rgb(66,204,209)","rgb(66,100,209)","rgb(66,188,209)","rgb(66,158,209)","rgb(66,163,209)","rgb(66,130,209)","rgb(66,137,209)","rgb(66,177,209)","rgb(66,130,209)","rgb(255, 65, 54)","rgb(66,127,209)","rgb(66,112,209)","rgb(255, 65, 54)","rgb(66,158,209)","rgb(66,163,209)","rgb(66,101,209)","rgb(66,180,209)","rgb(66,108,209)","rgb(66,93,209)","rgb(66,184,209)","rgb(66,163,209)","rgb(66,117,209)","rgb(66,89,209)","rgb(66,95,209)","rgb(66,128,209)","rgb(66,194,209)"]},"hoverinfo":"text","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"","xaxis":{"domain":[0,1],"automargin":true,"title":"","zeroline":false,"showline":false,"showticklabels":false,"showgrid":false},"yaxis":{"domain":[0,1],"automargin":true,"title":"","zeroline":false,"showline":false,"showticklabels":false,"showgrid":false},"annotations":[{"text":"Men: 16%","x":3,"y":10.85,"xref":"x","yref":"y","showarrow":false,"font":{"color":"blue","family":"sans serif","size":24}},{"text":"Men: 16%","x":3,"y":10.85,"xref":"x","yref":"y","showarrow":false,"font":{"color":"blue","family":"sans serif","size":24}},{"text":"Men: 16%","x":3,"y":10.85,"xref":"x","yref":"y","showarrow":false,"font":{"color":"blue","family":"sans serif","size":24}},{"text":"Women: 6%","x":8,"y":10.85,"xref":"x","yref":"y","showarrow":false,"font":{"color":"pink","family":"sans serif","size":24}},{"text":"Women: 6%","x":8,"y":10.85,"xref":"x","yref":"y","showarrow":false,"font":{"color":"pink","family":"sans serif","size":24}},{"text":"Women: 6%","x":8,"y":10.85,"xref":"x","yref":"y","showarrow":false,"font":{"color":"pink","family":"sans serif","size":24}},{"text":"≤40 years old: <br />14%","x":0.25,"y":8,"xref":"x","yref":"y","showarrow":false,"textangle":-90,"font":{"color":"black","family":"sans serif","size":24}},{"text":"≤40 years old: <br />14%","x":0.25,"y":8,"xref":"x","yref":"y","showarrow":false,"textangle":-90,"font":{"color":"black","family":"sans serif","size":24}},{"text":"≤40 years old: <br />14%","x":0.25,"y":8,"xref":"x","yref":"y","showarrow":false,"textangle":-90,"font":{"color":"black","family":"sans serif","size":24}},{"text":">40 years old: <br />8%","x":0.25,"y":3,"xref":"x","yref":"y","showarrow":false,"textangle":-90,"font":{"color":"darkgrey","family":"sans serif","size":24}},{"text":">40 years old: <br />8%","x":0.25,"y":3,"xref":"x","yref":"y","showarrow":false,"textangle":-90,"font":{"color":"darkgrey","family":"sans serif","size":24}},{"text":">40 years old: <br />8%","x":0.25,"y":3,"xref":"x","yref":"y","showarrow":false,"textangle":-90,"font":{"color":"darkgrey","family":"sans serif","size":24}}],"shapes":[{"type":"rect","line":{"color":"blue"},"opacity":1,"x0":0.75,"x1":5.4000000000000004,"xref":"x","y0":0.25,"y1":11.5,"yref":"y"},{"type":"rect","line":{"color":"pink"},"opacity":1,"x0":5.5999999999999996,"x1":10.25,"xref":"x","y0":0.25,"y1":11.5,"yref":"y"},{"type":"rect","line":{"color":"black"},"opacity":1,"x0":-0.5,"x1":10.5,"xref":"x","y0":5.5999999999999996,"y1":10.5,"yref":"y"},{"type":"rect","line":{"color":"darkgrey"},"opacity":1,"x0":-0.5,"x1":10.5,"xref":"x","y0":0.5,"y1":5.4000000000000004,"yref":"y"}],"hovermode":"closest","showlegend":false},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false,"displayModeBar":false},"data":[{"x":[1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,9,9,9,9,9,9,9,9,9,9,10,10,10,10,10,10,10,10,10,10],"y":[1,2,3,4,5,6,7,8,9,10,1,2,3,4,5,6,7,8,9,10,1,2,3,4,5,6,7,8,9,10,1,2,3,4,5,6,7,8,9,10,1,2,3,4,5,6,7,8,9,10,1,2,3,4,5,6,7,8,9,10,1,2,3,4,5,6,7,8,9,10,1,2,3,4,5,6,7,8,9,10,1,2,3,4,5,6,7,8,9,10,1,2,3,4,5,6,7,8,9,10],"text":["healthy","healthy","healthy","healthy","healthy","healthy","healthy","sick","healthy","healthy","healthy","healthy","healthy","healthy","healthy","sick","healthy","healthy","sick","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","sick","healthy","sick","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","sick","healthy","healthy","sick","sick","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","sick","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","sick","healthy","healthy","sick","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy","healthy"],"mode":"markers","marker":{"color":["rgb(66,192,209)","rgb(66,206,209)","rgb(66,71,209)","rgb(66,105,209)","rgb(66,71,209)","rgb(66,118,209)","rgb(66,133,209)","rgb(255, 65, 54)","rgb(66,182,209)","rgb(66,115,209)","rgb(66,108,209)","rgb(66,90,209)","rgb(66,194,209)","rgb(66,133,209)","rgb(66,158,209)","rgb(255, 65, 54)","rgb(66,189,209)","rgb(66,174,209)","rgb(255, 65, 54)","rgb(66,85,209)","rgb(66,131,209)","rgb(66,94,209)","rgb(66,114,209)","rgb(66,93,209)","rgb(66,114,209)","rgb(66,205,209)","rgb(66,169,209)","rgb(66,182,209)","rgb(66,92,209)","rgb(66,125,209)","rgb(255, 65, 54)","rgb(66,129,209)","rgb(255, 65, 54)","rgb(66,198,209)","rgb(66,170,209)","rgb(66,157,209)","rgb(66,120,209)","rgb(66,79,209)","rgb(66,134,209)","rgb(66,135,209)","rgb(66,160,209)","rgb(66,148,209)","rgb(255, 65, 54)","rgb(66,73,209)","rgb(66,103,209)","rgb(255, 65, 54)","rgb(255, 65, 54)","rgb(66,174,209)","rgb(66,87,209)","rgb(66,169,209)","rgb(66,197,209)","rgb(66,136,209)","rgb(66,92,209)","rgb(66,171,209)","rgb(66,199,209)","rgb(66,69,209)","rgb(66,117,209)","rgb(66,155,209)","rgb(66,118,209)","rgb(66,111,209)","rgb(66,161,209)","rgb(66,150,209)","rgb(66,171,209)","rgb(66,167,209)","rgb(66,97,209)","rgb(66,176,209)","rgb(66,79,209)","rgb(66,77,209)","rgb(255, 65, 54)","rgb(66,165,209)","rgb(66,209,209)","rgb(66,174,209)","rgb(66,103,209)","rgb(66,87,209)","rgb(66,204,209)","rgb(66,100,209)","rgb(66,188,209)","rgb(66,158,209)","rgb(66,163,209)","rgb(66,130,209)","rgb(66,137,209)","rgb(66,177,209)","rgb(66,130,209)","rgb(255, 65, 54)","rgb(66,127,209)","rgb(66,112,209)","rgb(255, 65, 54)","rgb(66,158,209)","rgb(66,163,209)","rgb(66,101,209)","rgb(66,180,209)","rgb(66,108,209)","rgb(66,93,209)","rgb(66,184,209)","rgb(66,163,209)","rgb(66,117,209)","rgb(66,89,209)","rgb(66,95,209)","rgb(66,128,209)","rgb(66,194,209)"],"size":20,"opacity":0.69999999999999996,"line":{"color":"rgba(31,119,180,1)"}},"hoverinfo":["text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text"],"type":"scatter","error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"line":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>This predicament of identifying the appropriate population for which to estimate risk is known as the “reference class problem.” This problem was identified by John Venn in 1876: “every single thing or event has an indefinite number of properties or attributes observable in it, and might therefore be considered as belonging to an indefinite number of different classes of things”<span class="citation" data-cites="Venn-1876"><sup><a href="#ref-Venn-1876" role="doc-biblioref">7</a></sup></span>. Thus, Stern (2012)<span class="citation" data-cites="Stern-2012"><sup><a href="#ref-Stern-2012" role="doc-biblioref">1</a></sup></span> argues that there is no such thing as unconditional or individual risk. The risk factors included in the model that we select determine the population classes, and thus the risk estimates for each class. Even for well-calibrated models, when we compare two models, the risk estimates associated with any one individual can vary substantially depending on which reference class an individual is assigned to<span class="citation" data-cites="Lemeshow-1995"><sup><a href="#ref-Lemeshow-1995" role="doc-biblioref">8</a></sup></span>.</p>
</section>
<section id="limitations" class="level2">
<h2 class="anchored" data-anchor-id="limitations">7. Limitations</h2>
<p>The goal of precision medicine is to make the reference class as small as possible so that there is less variability within that group, and better estimates of risk are assigned to each individual<span class="citation" data-cites="Kent-2018"><sup><a href="#ref-Kent-2018" role="doc-biblioref">9</a></sup></span>. This is a tricky problem and is discussed thoroughly by Kent et al.&nbsp;(2018). Most importantly, risk should be clearly communicated to doctors and patients that risk is estimated using a specific model, and “people with X, Y, and Z risk factors have a W% risk for disease Q.”</p>
<p>In my research, however, we skirt the individual risk issue by making predictions at the population-level. We can feel confident making these predictions when the model is shown to perform well on a given population (i.e.&nbsp;it is “well-calibrated”). Thus, our models can help inform how cancer screening guidelines should set to screen the top X percentage of the population at highest risk, or other allocations of resources.</p>
<p>Additional limitations include the problem of adjusting someone’s risk if their covariates change over time - it is currently unknown how this will affect risk since most models only include covariates measured at baseline. Issues surrounding generalizability or transportability to other populations for groups that are under-represented in study populations is common.</p>



</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body" data-line-spacing="2" role="list">
<div id="ref-Stern-2012" class="csl-entry" role="listitem">
<div class="csl-left-margin">1. </div><div class="csl-right-inline">Stern, R. H. Individual risk. <em>The Journal of Clinical Hypertension</em> <strong>14</strong>, 261–264 (2012).</div>
</div>
<div id="ref-Tsonis-2024" class="csl-entry" role="listitem">
<div class="csl-left-margin">2. </div><div class="csl-right-inline">Tsonis, A. A. On the origins of randomness. <em>Perspectives of Earth and Space Scientists</em> <strong>5</strong>, (2024).</div>
</div>
<div id="ref-Monroe-2022" class="csl-entry" role="listitem">
<div class="csl-left-margin">3. </div><div class="csl-right-inline">Monroe, J. G. <em>et al.</em> <a href="https://doi.org/10.1038/s41586-021-04269-6">Mutation bias reflects natural selection in arabidopsis thaliana</a>. <em>Nature</em> <strong>602</strong>, 101–105 (2022).</div>
</div>
<div id="ref-Hajek-2019" class="csl-entry" role="listitem">
<div class="csl-left-margin">4. </div><div class="csl-right-inline">Hájek, A. Interpretations of probability. in <em>The stanford encyclopedia of philosophy</em> (ed. Zalta, E. N.) (Metaphysics Research Lab, Stanford University, 2019).</div>
</div>
<div id="ref-Bernardo-Smith-1994" class="csl-entry" role="listitem">
<div class="csl-left-margin">5. </div><div class="csl-right-inline">Bernardo, J. M. &amp; Smith, A. F. M. <em>Bayesian theory</em>. (John Wiley &amp; Sons, Ltd., 1994).</div>
</div>
<div id="ref-Hackenberger-2019" class="csl-entry" role="listitem">
<div class="csl-left-margin">6. </div><div class="csl-right-inline">Hackenberger, B. K. Bayes or not bayes, is this the question? <em>Croatian Medical Journal</em> <strong>60</strong>, 50–52 (2019).</div>
</div>
<div id="ref-Venn-1876" class="csl-entry" role="listitem">
<div class="csl-left-margin">7. </div><div class="csl-right-inline">Venn, J. <em>The logic of chance</em>. (MacMillan; Co.; New Yorkr, 1876).</div>
</div>
<div id="ref-Lemeshow-1995" class="csl-entry" role="listitem">
<div class="csl-left-margin">8. </div><div class="csl-right-inline">Lemeshow, S., Klar, J. &amp; Teres, D. <a href="https://doi.org/10.1007/BF01704747">Outcome prediction for individual intensive care patients: Useful, misused, or abused?</a> <em>Intensive Care Medicine</em> <strong>21</strong>, 770–776 (1995).</div>
</div>
<div id="ref-Kent-2018" class="csl-entry" role="listitem">
<div class="csl-left-margin">9. </div><div class="csl-right-inline">Kent, D. M., Steyerberg, E. &amp; Klaveren, D. van. Personalized evidence based medicine: Predictive approaches to heterogeneous treatment effects. <em>BMJ (Clinical research ed.)</em> <strong>10</strong>, k4245 (2018).</div>
</div>
</div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>